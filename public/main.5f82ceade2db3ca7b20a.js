!function(e){function a(a){for(var l,c,s=a[0],o=a[1],i=a[2],d=0,E=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&E.push(n[c][0]),n[c]=0;for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l]);for(m&&m(a);E.length;)E.shift()();return r.push.apply(r,i||[]),t()}function t(){for(var e,a=0;a<r.length;a++){for(var t=r[a],l=!0,s=1;s<t.length;s++){var o=t[s];0!==n[o]&&(l=!1)}l&&(r.splice(a--,1),e=c(c.s=t[0]))}return e}var l={},n={0:0},r=[];function c(a){if(l[a])return l[a].exports;var t=l[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=e,c.c=l,c.d=function(e,a,t){c.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,a){if(1&a&&(e=c(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var l in e)c.d(t,l,function(a){return e[a]}.bind(null,l));return t},c.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(a,"a",a),a},c.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},c.p="";var s=window.webpackJsonp=window.webpackJsonp||[],o=s.push.bind(s);s.push=a,s=s.slice();for(var i=0;i<s.length;i++)a(s[i]);var m=o;r.push([454,1]),t()}({454:function(e,a,t){t(455),e.exports=t(852)},621:function(e,a,t){},852:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(30),c=t.n(r),s=t(43),o=t(105),i=t(423);var m=Object(o.c)({teams:function(e={data:null,isLoading:!1,error:null},a){switch(a.type){case"GET_TEAMS_START":return{...e,isLoading:!0};case"GET_TEAMS_SUCCESS":return{isLoading:!1,data:a.payload.data.content,error:null};case"GET_TEAMS_FAILURE":return{error:null,isLoading:!1,data:null};case"UPDATE_POSITION_LOAD_START":return{...e,isLoading:!0};case"UPDATE_POSITION_LOAD_SUCCESS":return e;case"UPDATE_POSITION_LOAD_FAILURE":return{error:null,isLoading:!1,data:null};case"UPDATE_TEAM_START":return{...e,isLoading:!0};case"UPDATE_TEAM_SUCCESS":{const t=a.payload.data,l=e.data.findIndex(e=>e.id===t.id),n=[...e.data];return n[l]=t,{...e,data:n}}case"UPDATE_TEAM_FAILURE":return{error:null,isLoading:!1,data:null};default:return e}},employees:function(e={data:null,isLoading:!1,error:null},a){switch(a.type){case"GET_EMPLOYEES_START":return{...e,isLoading:!0};case"GET_EMPLOYEES_SUCCESS":return{isLoading:!1,data:a.payload.data.content,error:null};case"GET_EMPLOYEES_FAILURE":return{error:null,isLoading:!1,data:null};default:return e}}}),d=(t(620),t(621),t(65)),E=t(29),u=t(862),p=t(853),v=t(110),h=t(868),b=t(869),g=t(863),y=t(866);const C=({title:e,labels:a,backlink:t})=>n.a.createElement(n.a.Fragment,null,t&&n.a.createElement("div",{className:"backlink"},t),n.a.createElement("div",{className:"page-header"},n.a.createElement("div",{className:"page-header-title"},e),a&&a.map((e,a)=>n.a.createElement("div",{key:a,className:"page-header-label"},e))));var N=t(143);const O=({type:e})=>{let a,t;switch(e){case"PRODUCT":a="olive",t="Продуктовая";break;case"PROJECT":a="yellow",t="Проектная";break;case"SERVICE":a="purple",t="Сервисная";break;case"DEVOPS":a="teal",t="Девопс";break;case"SUPPORT":a="green",t="Поддержка"}return n.a.createElement(N.a,{circular:!0,color:a},t)},f=({status:e})=>{let a,t;switch(e){case"ACTIVE":a="orange",t="Активная";break;case"CLOSED":a="red",t="Закрытая";break;case"NEW":a="gray",t="Новая"}return n.a.createElement(N.a,{circular:!0,color:a},t)};var w=t(111),S=t.n(w);function k(){return async function(e){e({type:"GET_TEAMS_START"});try{const a=await S.a.get("/api/teams");return e({type:"GET_TEAMS_SUCCESS",payload:a}),a}catch(a){throw e({type:"GET_TEAMS_FAILURE",payload:a}),a}}}function T(){return async function(e){e({type:"GET_EMPLOYEES_START"});try{const a=await S.a.get("/api/employees");return e({type:"GET_EMPLOYEES_SUCCESS",payload:a}),a}catch(a){throw e({type:"GET_EMPLOYEES_FAILURE",payload:a}),a}}}function _(e){return async function(a){a({type:"UPDATE_TEAM_START"});try{const l=await(t=e,S.a.put("/api/teams",t));return a({type:"UPDATE_TEAM_SUCCESS",payload:l}),l}catch(e){throw a({type:"UPDATE_TEAM_FAILURE",payload:e}),e}var t}}S.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",S.a.defaults.headers.common["Access-Control-Allow-Origin"]="*";var A=t(80),P=t(128),L=t(861);const j=()=>n.a.createElement("div",{className:"loading-overlay"},n.a.createElement(L.a,{active:!0})),M=[{value:"PRODUCT",label:"Продуктовая"},{value:"PROJECT",label:"Проектная"},{value:"SERVICE",label:"Сервисная"},{value:"DEVOPS",label:"Девопс"},{value:"SUPPORT",label:"Поддержка"}],R=[{value:"active",label:"Активная"},{value:"closed",label:"Закрытая"},{value:"new",label:"Новая"}],U=()=>{const[e,a]=Object(l.useState)(!1),{data:t,isLoading:r}=Object(s.c)(e=>e.teams),c=t,o=Object(s.b)(),i=Object(P.a)();return Object(l.useEffect)(()=>{o(k())},[o]),!c||r?n.a.createElement(j,null):n.a.createElement(u.a,{className:"layout teams-page"},n.a.createElement(C,{title:"Команды"}),n.a.createElement("div",null,n.a.createElement(p.a,{className:"filter-button",onClick:()=>{a(!e)}},n.a.createElement(v.a,{name:"filter"}),"Фильтры  ",n.a.createElement(v.a,{name:""+(e?"chevron down":"chevron up")}))),e&&n.a.createElement(h.a,null,n.a.createElement("div",{className:"filter-header"},"Фильтры"),n.a.createElement(b.a,null,n.a.createElement(b.a.Column,{width:4},n.a.createElement(A.a,{closeMenuOnSelect:!1,components:i,isMulti:!0,options:M,placeholder:"Выберите тип команды"})),n.a.createElement(b.a.Column,{width:4},n.a.createElement(A.a,{closeMenuOnSelect:!1,components:i,isMulti:!0,options:R,placeholder:"Выберите статус команды"})),n.a.createElement(b.a.Column,{width:4},n.a.createElement(g.a,{icon:"search",placeholder:"Введите ФИО"})),n.a.createElement(b.a.Column,{width:4,textAlign:"right"},n.a.createElement(p.a,null,"Применить")))),n.a.createElement(y.a,{singleLine:!0},n.a.createElement(y.a.Header,null,n.a.createElement(y.a.Row,null,n.a.createElement(y.a.HeaderCell,{width:1}),n.a.createElement(y.a.HeaderCell,{width:4},"Название"),n.a.createElement(y.a.HeaderCell,{width:4},"Владелец"),n.a.createElement(y.a.HeaderCell,{width:2},"Тип"),n.a.createElement(y.a.HeaderCell,{width:2},"Статус"),n.a.createElement(y.a.HeaderCell,{width:2}))),n.a.createElement(y.a.Body,null,c.map((e,a)=>n.a.createElement(y.a.Row,{key:e.id},n.a.createElement(y.a.Cell,{textAlign:"center"},a+1),n.a.createElement(y.a.Cell,null,e.title),n.a.createElement(y.a.Cell,null,e.manager),n.a.createElement(y.a.Cell,null,n.a.createElement(O,{type:e.type})),n.a.createElement(y.a.Cell,null,n.a.createElement(f,{status:e.status})),n.a.createElement(y.a.Cell,{textAlign:"right"},n.a.createElement(d.b,{className:"link-to-team",to:"/team/"+e.id,key:"person"},"Перейти >")))))))};var I=t(441),D=t(188),x=t.n(D);t(384);const H=({positionLoad:e})=>{const[a,t]=Object(l.useState)(e.chargePercent);Object(s.b)();return n.a.createElement("div",{className:"card person-card"},n.a.createElement(v.a,{onClick:()=>{},className:"close-button",name:"close"}),n.a.createElement("div",null,n.a.createElement(I.a,{circular:!0,src:"https://react.semantic-ui.com/images/avatar/small/matthew.png"})),n.a.createElement("div",{className:"name"},e.employee.fio),n.a.createElement("div",{className:"role"},e.employee.position),n.a.createElement("div",{className:"chargeability-range"},n.a.createElement("span",{className:"percent-value"},a,"%"),n.a.createElement(x.a,{className:"chargeability-range-input "+(a<=33?"green":a<=77?"orange":"red"),value:a,orientation:"horizontal",onChange:e=>{t(e)},onCompleteChange:e=>{}})))},F=({name:e})=>n.a.createElement("div",{className:"card person-card"},n.a.createElement("div",null,n.a.createElement(I.a,{circular:!0,src:"https://react.semantic-ui.com/images/avatar/small/matthew.png"})),n.a.createElement("div",{className:"name"},e),n.a.createElement("div",{className:"role"},"Руководитель команды")),G=({capacityCount:e,actualCount:a,percent:t})=>n.a.createElement("div",{className:"card role-card"},n.a.createElement("div",{className:"role-card-item"},n.a.createElement("div",{className:"property"},"Необходимо"),n.a.createElement("div",{className:"value"},e)),n.a.createElement("div",{className:"role-card-item"},n.a.createElement("div",{className:"property"},"Имеется"),n.a.createElement("div",{className:"value"},a)),n.a.createElement("div",{className:"role-card-item"},n.a.createElement("div",{className:"property"},"Укомпектованность"),n.a.createElement("div",{className:"value"},t))),V=({onClick:e})=>n.a.createElement("div",{className:"card empty-card",onClick:e},n.a.createElement("svg",{className:"plus",width:"54",height:"54",viewBox:"0 0 54 54",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{d:"M27 11.25V42.75",stroke:"#DFDFE4",strokeWidth:"4.5",strokeLinecap:"round",strokeLinejoin:"round"}),n.a.createElement("path",{d:"M11.25 27H42.75",stroke:"#DFDFE4",strokeWidth:"4.5",strokeLinecap:"round",strokeLinejoin:"round"})));t(726);var B=t(426),Y=t.n(B),z=t(265),J=t.n(z),W=t(266),q=t.n(W),K=t(864);const Q=({percent:e,team:a})=>{const t=Object(s.b)(),[r,c]=Object(l.useState)(!1),[o,i]=Object(l.useState)(null),m=[{name:"Group A",value:100-e},{name:"Group B",value:e}],d=["gray","#FFBD4D"];return n.a.createElement("div",{className:"card double-sized team-info-card"},n.a.createElement("div",null,n.a.createElement(Y.a,{width:170,height:140},n.a.createElement(J.a,{data:m,cx:75,cy:65,innerRadius:40,outerRadius:60,fill:"#8884d8",paddingAngle:5,dataKey:"value"},m.map((e,a)=>n.a.createElement(q.a,{key:"cell-"+a,fill:d[a%d.length]}))))),n.a.createElement("div",null,n.a.createElement("div",{className:"property-wrapper"},n.a.createElement("div",{className:"property"},"Укомплектованность"),n.a.createElement("div",{className:"value"},e,"%")),n.a.createElement("div",{className:"property-wrapper"},n.a.createElement("div",{className:"property"},"Тип команды"),n.a.createElement("div",{className:"value"},(e=>{let a;switch(e){case"PRODUCT":a="Продуктовая";break;case"PROJECT":a="Проектная";break;case"SERVICE":a="Сервисная";break;case"DEVOPS":a="Девопс";break;case"SUPPORT":a="Поддержка";break;default:a="Не указано"}return a})(a.type)," ",n.a.createElement(v.a,{title:"Изменить тип",className:"edit-icon",onClick:()=>{c(!0)},name:"edit",size:"small"}))),n.a.createElement("div",{className:"chart-legend"},n.a.createElement("div",{className:"chart-marker orange"}),n.a.createElement("div",null,"Занятые позиции"),n.a.createElement("div",{className:"chart-marker gray"}),n.a.createElement("div",null,"Свободные позиции"))),r&&n.a.createElement(K.a,{size:"mini",open:!0,onClose:()=>c(!1)},n.a.createElement(K.a.Header,null,"Изменение типа команды"),n.a.createElement(K.a.Content,null,n.a.createElement(A.a,{components:Object(P.a)(),options:M,placeholder:"Выберите тип команды",onChange:e=>{i(e.value)}})),n.a.createElement(K.a.Actions,null,n.a.createElement(p.a,{negative:!0,onClick:()=>c(!1)},"Отмена"),n.a.createElement(p.a,{positive:!0,onClick:()=>{c(!1),t(_({...a,type:o}))}},"Сохранить"))))},X=e=>{let a=0,t=0;for(let l=0;l<e.positions.length;l++){a+=e.positions[l].capacity;const n=e.positions[l].positionLoads;for(let e=0;e<n.length;e++)t+=n[e].chargePercent}return parseInt(t/a)},Z=()=>{let{id:e}=Object(E.i)();const a=Object(E.g)(),t=Object(s.c)(e=>e.teams.data).find(a=>a.id===parseInt(e));return n.a.createElement(u.a,{className:"layout team-page"},n.a.createElement(C,{title:t.title,labels:[n.a.createElement(f,{key:t.status,status:t.status}),n.a.createElement(O,{key:t.type,type:t.type})],backlink:n.a.createElement(d.b,{className:"link-to-teams",to:"/teams",key:"teams"},"< Вернуться к командам")}),n.a.createElement("div",{className:"card-panel"},n.a.createElement(F,{name:t.manager}),n.a.createElement(Q,{percent:X(t),team:t})),t.positions.map(e=>{var l;const r=e.positionLoads.reduce((e,a)=>e+a.chargePercent,0);return n.a.createElement("div",{key:e.id},n.a.createElement("div",{className:"role-title"},null===(l=e.info)||void 0===l?void 0:l.role),n.a.createElement("div",{className:"card-panel"},n.a.createElement(G,{capacityCount:e.capacity,actualCount:e.positionLoads.length,percent:parseInt(r/e.capacity)+"%"}),e.positionLoads.map(e=>n.a.createElement(H,{key:e.id,positionLoad:e})),n.a.createElement(V,{onClick:()=>{a.push("/persons?teamId="+t.id)}})))}))};var $=t(438),ee=t(439),ae=t.n(ee);const te=({person:e,setShowPersonModal:a})=>{const t=Object(E.g)(),[r,c]=Object(l.useState)(100),s=function(){const e=Object(E.i)(),a=Object(E.h)(),t=Object(E.g)(),n=Object(E.j)();return Object(l.useMemo)(()=>({push:t.push,replace:t.replace,pathname:a.pathname,query:{...ae.a.parse(a.search),...e},match:n,location:a,history:t}),[e,n,a,t])}();return n.a.createElement($.a,{sidebar:n.a.createElement("div",{className:"person-sidebar"},n.a.createElement(p.a,{className:"close-sidebar",onClick:()=>a(!1),icon:"close"}),n.a.createElement("div",{className:"section"},n.a.createElement(I.a,{width:96,height:96,circular:!0,src:"https://react.semantic-ui.com/images/avatar/small/matthew.png"}),n.a.createElement("div",{className:"name"},e.fio," ",n.a.createElement(p.a,{className:"add-person-button",onClick:()=>{t.push("/team/"+s.query.teamId)}},n.a.createElement(v.a,{name:"plus"}),"Добавить")),n.a.createElement("div",{className:"label-text"},e.position)),n.a.createElement("div",{className:"section"},n.a.createElement("div",{className:"label-text"},"Уровень загрузки на проекте Прокопьевск"),n.a.createElement("div",{className:"chargeability-range"},n.a.createElement("span",{className:"percent-value"},r,"%"),n.a.createElement(x.a,{className:"chargeability-range-input sidebar-chargeability-range-input "+(r<33?"green":r<77?"orange":"red"),value:r,orientation:"horizontal",onChange:e=>{c(e)}}))),n.a.createElement("div",{className:"section"},n.a.createElement(b.a,null,n.a.createElement(b.a.Row,null,n.a.createElement(b.a.Column,{width:7},n.a.createElement("div",{className:"label-text"},"Табельный номер"),n.a.createElement("div",{className:"label-value"},e.number)),n.a.createElement(b.a.Column,{width:9},n.a.createElement("div",{className:"label-text"},"ФИО Руководителя"),n.a.createElement("div",{className:"label-value"},e.manager))),n.a.createElement(b.a.Row,null,n.a.createElement(b.a.Column,null,n.a.createElement("div",{className:"label-text"},"Должность"),n.a.createElement("div",{className:"label-value"},e.position))),n.a.createElement(b.a.Row,null,n.a.createElement(b.a.Column,null,n.a.createElement("div",{className:"label-text"},"Стек технологий"),n.a.createElement("div",{className:"technology-stack"},n.a.createElement("span",{className:"technology-label"},"React"),n.a.createElement("span",{className:"technology-label"},"Redux"),n.a.createElement("span",{className:"technology-label"},"Typescript"))))))),open:!0,onSetOpen:a,styles:{sidebar:{background:"white"}}})},le=[{value:"developer",label:"Разработчик"},{value:"middleDeveloper",label:"Старший разработчик"},{value:"seniorDevelope",label:"Ведущий разработчик"},{value:"teamLead",label:"Тимлид"},{value:"manager",label:"Менеджер"}],ne=[{value:"it",label:"ИТ Отдел"},{value:"bookkeeping",label:"Бухгалтерия"},{value:"ml",label:"Отдел машинного обучения"}],re=()=>{const[e,a]=Object(l.useState)(!1),[{isPersonModalVisible:t,personId:r},c]=Object(l.useState)({isPersonModalVisible:!1,personId:null}),o=Object(E.g)(),i=Object(P.a)(),m=Object(s.b)(),{data:d,isLoading:N}=Object(s.c)(e=>e.employees),O=d;return Object(l.useEffect)(()=>{m(T())},[m]),!O||N?n.a.createElement(j,null):n.a.createElement(u.a,{className:"layout persons-page"},n.a.createElement(C,{title:"Добавление сотрудника",backlink:n.a.createElement("a",{className:"a-link",onClick:()=>{o.goBack()}},"< Вернуться к команде")}),n.a.createElement("div",null,n.a.createElement(p.a,{className:"filter-button",onClick:()=>{a(!e)}},n.a.createElement(v.a,{name:"filter"}),"Фильтры  ",n.a.createElement(v.a,{name:""+(e?"chevron down":"chevron up")}))),e&&n.a.createElement(h.a,null,n.a.createElement("div",{className:"filter-header"},"Фильтры"),n.a.createElement(b.a,null,n.a.createElement(b.a.Column,{width:4},n.a.createElement(A.a,{closeMenuOnSelect:!1,components:i,isMulti:!0,options:le,placeholder:"Выберите должность"})),n.a.createElement(b.a.Column,{width:4},n.a.createElement(A.a,{closeMenuOnSelect:!1,components:i,isMulti:!0,options:ne,placeholder:"Выберите подразделение"})),n.a.createElement(b.a.Column,{width:4},n.a.createElement(g.a,{icon:"search",placeholder:"Введите ФИО"})),n.a.createElement(b.a.Column,{width:4,textAlign:"right"},n.a.createElement(p.a,null,"Применить")))),n.a.createElement(y.a,{singleLine:!0},n.a.createElement(y.a.Header,null,n.a.createElement(y.a.Row,null,n.a.createElement(y.a.HeaderCell,{width:1}),n.a.createElement(y.a.HeaderCell,{width:3},"ФИО"),n.a.createElement(y.a.HeaderCell,{width:3},"Таб. номер"),n.a.createElement(y.a.HeaderCell,{width:3},"Руководитель"),n.a.createElement(y.a.HeaderCell,{width:2},"Подразделение"),n.a.createElement(y.a.HeaderCell,{width:2},"Специализация"),n.a.createElement(y.a.HeaderCell,{width:2}))),n.a.createElement(y.a.Body,null,O.map((e,a)=>n.a.createElement(y.a.Row,{key:e.id,id:e.id},n.a.createElement(y.a.Cell,{textAlign:"center"},a+1),n.a.createElement(y.a.Cell,null,e.fio),n.a.createElement(y.a.Cell,null,e.number),n.a.createElement(y.a.Cell,null,e.manager),n.a.createElement(y.a.Cell,null,e.department),n.a.createElement(y.a.Cell,null,e.spec),n.a.createElement(y.a.Cell,{textAlign:"right"},n.a.createElement("a",{className:"a-link",onClick:e=>{c({isPersonModalVisible:!0,personId:e.target.closest("tr").id})}},"Настроить")))))),t&&n.a.createElement(te,{person:O.find(e=>e.id===parseInt(r)),setShowPersonModal:c}))},ce=()=>n.a.createElement(E.d,null,n.a.createElement(E.b,{path:"/",exact:!0,component:U}),n.a.createElement(E.b,{path:"/teams",exact:!0,component:U}),n.a.createElement(E.b,{path:"/persons",component:re}),n.a.createElement(E.b,{path:"/team/:id",component:Z}),n.a.createElement(E.a,{to:"/"}));var se=t(867);const oe=()=>n.a.createElement(se.a,{borderless:!0},n.a.createElement(u.a,null,n.a.createElement(se.a.Item,{key:"demouser",position:"right"},"DemoUser"))),ie=()=>n.a.createElement(l.Fragment,null,n.a.createElement(d.a,null,n.a.createElement(oe,null),n.a.createElement(ce,null))),me=Object(o.d)(m,Object(o.a)(i.a));c.a.render(n.a.createElement(s.a,{store:me},n.a.createElement(ie,null)),document.getElementById("root"))}});