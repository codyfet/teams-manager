!function(e){function a(a){for(var l,c,s=a[0],m=a[1],o=a[2],E=0,d=[];E<s.length;E++)c=s[E],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&d.push(n[c][0]),n[c]=0;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&(e[l]=m[l]);for(i&&i(a);d.length;)d.shift()();return r.push.apply(r,o||[]),t()}function t(){for(var e,a=0;a<r.length;a++){for(var t=r[a],l=!0,s=1;s<t.length;s++){var m=t[s];0!==n[m]&&(l=!1)}l&&(r.splice(a--,1),e=c(c.s=t[0]))}return e}var l={},n={0:0},r=[];function c(a){if(l[a])return l[a].exports;var t=l[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=e,c.c=l,c.d=function(e,a,t){c.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,a){if(1&a&&(e=c(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var l in e)c.d(t,l,function(a){return e[a]}.bind(null,l));return t},c.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(a,"a",a),a},c.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},c.p="";var s=window.webpackJsonp=window.webpackJsonp||[],m=s.push.bind(s);s.push=a,s=s.slice();for(var o=0;o<s.length;o++)a(s[o]);var i=m;r.push([453,1]),t()}({453:function(e,a,t){t(454),e.exports=t(850)},620:function(e,a,t){},850:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(30),c=t.n(r),s=t(43),m=t(105),o=t(423);var i=Object(m.c)({teams:function(e={data:null,isLoading:!1,error:null},a){switch(a.type){case"GET_TEAMS_START":return{...e,isLoading:!0};case"GET_TEAMS_SUCCESS":return{isLoading:!1,data:a.payload.data.content,error:null};case"GET_TEAMS_FAILURE":return{error:null,isLoading:!1,data:null};case"UPDATE_POSITION_LOAD_START":return{...e,isLoading:!0};case"UPDATE_POSITION_LOAD_SUCCESS":return e;case"UPDATE_POSITION_LOAD_FAILURE":return{error:null,isLoading:!1,data:null};case"UPDATE_TEAM_START":return{...e,isLoading:!0};case"UPDATE_TEAM_SUCCESS":{const t=a.payload.data,l=e.data.findIndex(e=>e.id===t.id),n=[...e.data];return n[l]=t,{...e,data:n}}case"UPDATE_TEAM_FAILURE":return{error:null,isLoading:!1,data:null};default:return e}},employees:function(e={data:null,isLoading:!1,error:null},a){switch(a.type){case"GET_EMPLOYEES_START":return{...e,isLoading:!0};case"GET_EMPLOYEES_SUCCESS":return{isLoading:!1,data:a.payload.data.content,error:null};case"GET_EMPLOYEES_FAILURE":return{error:null,isLoading:!1,data:null};default:return e}}}),E=(t(619),t(620),t(70)),d=t(29),u=t(860),p=t(851),v=t(110),h=t(866),b=t(867),g=t(861),y=t(864);const C=({title:e,labels:a,backlink:t})=>n.a.createElement(n.a.Fragment,null,t&&n.a.createElement("div",{className:"backlink"},t),n.a.createElement("div",{className:"page-header"},n.a.createElement("div",{className:"page-header-title"},e),a&&a.map((e,a)=>n.a.createElement("div",{key:a,className:"page-header-label"},e))));var N=t(143);const w=({type:e})=>{let a,t;switch(e){case"PRODUCT":a="olive",t="Продуктовая";break;case"PROJECT":a="yellow",t="Проектная";break;case"SERVICE":a="purple",t="Сервисная";break;case"DEVOPS":a="teal",t="Девопс";break;case"SUPPORT":a="green",t="Поддержка"}return n.a.createElement(N.a,{circular:!0,color:a},t)},f=({status:e})=>{let a,t;switch(e){case"ACTIVE":a="orange",t="Активная";break;case"CLOSED":a="red",t="Закрытая";break;case"NEW":a="gray",t="Новая"}return n.a.createElement(N.a,{circular:!0,color:a},t)};var S=t(111),O=t.n(S);function k(){return async function(e){e({type:"GET_TEAMS_START"});try{const a=await O.a.get("/api/teams");return e({type:"GET_TEAMS_SUCCESS",payload:a}),a}catch(a){throw e({type:"GET_TEAMS_FAILURE",payload:a}),a}}}function T(){return async function(e){e({type:"GET_EMPLOYEES_START"});try{const a=await O.a.get("/api/employees");return e({type:"GET_EMPLOYEES_SUCCESS",payload:a}),a}catch(a){throw e({type:"GET_EMPLOYEES_FAILURE",payload:a}),a}}}function _(e){return async function(a){a({type:"UPDATE_TEAM_START"});try{const l=await(t=e,O.a.put("/api/teams",t));return a({type:"UPDATE_TEAM_SUCCESS",payload:l}),l}catch(e){throw a({type:"UPDATE_TEAM_FAILURE",payload:e}),e}var t}}O.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",O.a.defaults.headers.common["Access-Control-Allow-Origin"]="*";var A=t(80),P=t(128),L=t(859);const R=()=>n.a.createElement("div",{className:"loading-overlay"},n.a.createElement(L.a,{active:!0})),j=[{value:"PRODUCT",label:"Продуктовая"},{value:"PROJECT",label:"Проектная"},{value:"SERVICE",label:"Сервисная"},{value:"DEVOPS",label:"Девопс"},{value:"SUPPORT",label:"Поддержка"}],M=[{value:"active",label:"Активная"},{value:"closed",label:"Закрытая"},{value:"new",label:"Новая"}],U=()=>{const[e,a]=Object(l.useState)(!1),{data:t,isLoading:r}=Object(s.c)(e=>e.teams),c=t,m=Object(s.b)(),o=Object(P.a)();return Object(l.useEffect)(()=>{m(k())},[m]),!c||r?n.a.createElement(R,null):n.a.createElement(u.a,{className:"layout teams-page"},n.a.createElement(C,{title:"Команды"}),n.a.createElement("div",null,n.a.createElement(p.a,{className:"filter-button",onClick:()=>{a(!e)}},n.a.createElement(v.a,{name:"filter"}),"Фильтры  ",n.a.createElement(v.a,{name:""+(e?"chevron down":"chevron up")}))),e&&n.a.createElement(h.a,null,n.a.createElement("div",{className:"filter-header"},"Фильтры"),n.a.createElement(b.a,null,n.a.createElement(b.a.Column,{width:4},n.a.createElement(A.a,{closeMenuOnSelect:!1,components:o,isMulti:!0,options:j,placeholder:"Выберите тип команды"})),n.a.createElement(b.a.Column,{width:4},n.a.createElement(A.a,{closeMenuOnSelect:!1,components:o,isMulti:!0,options:M,placeholder:"Выберите статус команды"})),n.a.createElement(b.a.Column,{width:4},n.a.createElement(g.a,{icon:"search",placeholder:"Введите ФИО"})),n.a.createElement(b.a.Column,{width:4,textAlign:"right"},n.a.createElement(p.a,null,"Применить")))),n.a.createElement(y.a,{singleLine:!0},n.a.createElement(y.a.Header,null,n.a.createElement(y.a.Row,null,n.a.createElement(y.a.HeaderCell,{width:1}),n.a.createElement(y.a.HeaderCell,{width:4},"Название"),n.a.createElement(y.a.HeaderCell,{width:4},"Владелец"),n.a.createElement(y.a.HeaderCell,{width:2},"Тип"),n.a.createElement(y.a.HeaderCell,{width:2},"Статус"),n.a.createElement(y.a.HeaderCell,{width:2}))),n.a.createElement(y.a.Body,null,c.map((e,a)=>n.a.createElement(y.a.Row,{key:e.id},n.a.createElement(y.a.Cell,{textAlign:"center"},a+1),n.a.createElement(y.a.Cell,null,e.title),n.a.createElement(y.a.Cell,null,e.manager),n.a.createElement(y.a.Cell,null,n.a.createElement(w,{type:e.type})),n.a.createElement(y.a.Cell,null,n.a.createElement(f,{status:e.status})),n.a.createElement(y.a.Cell,{textAlign:"right"},n.a.createElement(E.b,{className:"link-to-team",to:"/team/"+e.id,key:"person"},"Перейти >")))))))};var x=t(440),D=t(188),I=t.n(D);t(384);const H=({positionLoad:e})=>{const[a,t]=Object(l.useState)(e.chargePercent);Object(s.b)();return n.a.createElement("div",{className:"card person-card"},n.a.createElement(v.a,{onClick:()=>{},className:"close-button",name:"close"}),n.a.createElement("div",null,n.a.createElement(x.a,{circular:!0,src:"https://react.semantic-ui.com/images/avatar/small/matthew.png"})),n.a.createElement("div",{className:"name"},e.employee.name),n.a.createElement("div",{className:"role"},e.employee.role),n.a.createElement("div",{className:"chargeability-range"},n.a.createElement("span",{className:"percent-value"},a,"%"),n.a.createElement(I.a,{className:"chargeability-range-input "+(a<=33?"green":a<=77?"orange":"red"),value:a,orientation:"horizontal",onChange:e=>{t(e)},onCompleteChange:e=>{console.log("complete change")}})))},F=({name:e})=>n.a.createElement("div",{className:"card person-card"},n.a.createElement("div",null,n.a.createElement(x.a,{circular:!0,src:"https://react.semantic-ui.com/images/avatar/small/matthew.png"})),n.a.createElement("div",{className:"name"},e),n.a.createElement("div",{className:"role"},"Руководитель команды")),G=({capacityCount:e,actualCount:a,percent:t})=>n.a.createElement("div",{className:"card role-card"},n.a.createElement("div",{className:"role-card-item"},n.a.createElement("div",{className:"property"},"Необходимо"),n.a.createElement("div",{className:"value"},e)),n.a.createElement("div",{className:"role-card-item"},n.a.createElement("div",{className:"property"},"Имеется"),n.a.createElement("div",{className:"value"},a)),n.a.createElement("div",{className:"role-card-item"},n.a.createElement("div",{className:"property"},"Укомпектованность"),n.a.createElement("div",{className:"value"},t))),V=({onClick:e})=>n.a.createElement("div",{className:"card empty-card",onClick:e},n.a.createElement("svg",{className:"plus",width:"54",height:"54",viewBox:"0 0 54 54",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{d:"M27 11.25V42.75",stroke:"#DFDFE4",strokeWidth:"4.5",strokeLinecap:"round",strokeLinejoin:"round"}),n.a.createElement("path",{d:"M11.25 27H42.75",stroke:"#DFDFE4",strokeWidth:"4.5",strokeLinecap:"round",strokeLinejoin:"round"})));t(725);var B=t(426),Y=t.n(B),z=t(264),J=t.n(z),W=t(265),K=t.n(W),q=t(862);const Q=({percent:e,team:a})=>{const t=Object(s.b)(),[r,c]=Object(l.useState)(!1),[m,o]=Object(l.useState)(null),i=[{name:"Group A",value:100-e},{name:"Group B",value:e}],E=["gray","#FFBD4D"];return n.a.createElement("div",{className:"card double-sized team-info-card"},n.a.createElement("div",null,n.a.createElement(Y.a,{width:170,height:140},n.a.createElement(J.a,{data:i,cx:75,cy:65,innerRadius:40,outerRadius:60,fill:"#8884d8",paddingAngle:5,dataKey:"value"},i.map((e,a)=>n.a.createElement(K.a,{key:"cell-"+a,fill:E[a%E.length]}))))),n.a.createElement("div",null,n.a.createElement("div",{className:"property-wrapper"},n.a.createElement("div",{className:"property"},"Укомплектованность"),n.a.createElement("div",{className:"value"},e,"%")),n.a.createElement("div",{className:"property-wrapper"},n.a.createElement("div",{className:"property"},"Тип команды"),n.a.createElement("div",{className:"value"},(e=>{let a;switch(e){case"PRODUCT":a="Продуктовая";break;case"PROJECT":a="Проектная";break;case"SERVICE":a="Сервисная";break;case"DEVOPS":a="Девопс";break;case"SUPPORT":a="Поддержка";break;default:a="Не указано"}return a})(a.type)," ",n.a.createElement(v.a,{title:"Изменить тип",className:"edit-icon",onClick:()=>{c(!0)},name:"edit",size:"small"}))),n.a.createElement("div",{className:"chart-legend"},n.a.createElement("div",{className:"chart-marker orange"}),n.a.createElement("div",null,"Занятые позиции"),n.a.createElement("div",{className:"chart-marker gray"}),n.a.createElement("div",null,"Свободные позиции"))),r&&n.a.createElement(q.a,{size:"mini",open:!0,onClose:()=>c(!1)},n.a.createElement(q.a.Header,null,"Изменение типа команды"),n.a.createElement(q.a.Content,null,n.a.createElement(A.a,{components:Object(P.a)(),options:j,placeholder:"Выберите тип команды",onChange:e=>{o(e.value)}})),n.a.createElement(q.a.Actions,null,n.a.createElement(p.a,{negative:!0,onClick:()=>c(!1)},"Отмена"),n.a.createElement(p.a,{positive:!0,onClick:()=>{c(!1),t(_({...a,type:m}))}},"Сохранить"))))},X=e=>{let a=0,t=0;for(let l=0;l<e.positions.length;l++){a+=e.positions[l].capacity;const n=e.positions[l].positionLoads;for(let e=0;e<n.length;e++)t+=n[e].chargePercent}return parseInt(t/a)},Z=()=>{let{id:e}=Object(d.h)();const a=Object(d.g)(),t=Object(s.c)(e=>e.teams.data).find(a=>a.id===parseInt(e));return n.a.createElement(u.a,{className:"layout team-page"},n.a.createElement(C,{title:t.title,labels:[n.a.createElement(f,{key:t.status,status:t.status}),n.a.createElement(w,{key:t.type,type:t.type})],backlink:n.a.createElement(E.b,{className:"link-to-teams",to:"/teams",key:"teams"},"< Вернуться к командам")}),n.a.createElement("div",{className:"card-panel"},n.a.createElement(F,{name:t.manager}),n.a.createElement(Q,{percent:X(t),team:t})),t.positions.map(e=>{var t;const l=e.positionLoads.reduce((e,a)=>e+a.chargePercent,0);return n.a.createElement("div",{key:e.id},n.a.createElement("div",{className:"role-title"},null===(t=e.info)||void 0===t?void 0:t.role),n.a.createElement("div",{className:"card-panel"},n.a.createElement(G,{capacityCount:e.capacity,actualCount:e.positionLoads.length,percent:parseInt(l/e.capacity)+"%"}),e.positionLoads.map(e=>n.a.createElement(H,{key:e.id,positionLoad:e})),n.a.createElement(V,{onClick:()=>{a.push("/persons")}})))}))};var $=t(438);const ee=({person:e,setShowPersonModal:a})=>{const t=Object(d.g)();return n.a.createElement($.a,{sidebar:n.a.createElement("div",{className:"person-sidebar"},n.a.createElement(p.a,{className:"close-sidebar",onClick:()=>a(!1),icon:"close"}),n.a.createElement("div",{className:"section"},n.a.createElement(x.a,{width:96,height:96,circular:!0,src:"https://react.semantic-ui.com/images/avatar/small/matthew.png"}),n.a.createElement("div",{className:"name"},e.name," ",n.a.createElement(p.a,{className:"add-person-button",onClick:()=>{t.push("/team/9")}},n.a.createElement(v.a,{name:"plus"}),"Добавить")),n.a.createElement("div",{className:"label-text"},e.level)),n.a.createElement("div",{className:"section"},n.a.createElement("div",{className:"label-text"},"Уровень загрузки на проекте Прокопьевск"),n.a.createElement("div",{className:"chargeability-range"},n.a.createElement("span",{className:"percent-value"},e.chargeability,"%"),n.a.createElement(I.a,{className:"chargeability-range-input sidebar-chargeability-range-input "+(e.chargeability<33?"green":e.chargeability<77?"orange":"red"),value:e.chargeability,orientation:"horizontal",onChange:()=>null}))),n.a.createElement("div",{className:"section"},n.a.createElement(b.a,null,n.a.createElement(b.a.Row,null,n.a.createElement(b.a.Column,{width:7},n.a.createElement("div",{className:"label-text"},"Табельный номер"),n.a.createElement("div",{className:"label-value"},"1234567")),n.a.createElement(b.a.Column,{width:9},n.a.createElement("div",{className:"label-text"},"ФИО Руководителя"),n.a.createElement("div",{className:"label-value"},"Петров Иван Иванович"))),n.a.createElement(b.a.Row,null,n.a.createElement(b.a.Column,null,n.a.createElement("div",{className:"label-text"},"Должность"),n.a.createElement("div",{className:"label-value"},"Старший разработчик"))),n.a.createElement(b.a.Row,null,n.a.createElement(b.a.Column,null,n.a.createElement("div",{className:"label-text"},"Стек технологий"),n.a.createElement("div",{className:"technology-stack"},n.a.createElement("span",{className:"technology-label"},"React"),n.a.createElement("span",{className:"technology-label"},"Redux"),n.a.createElement("span",{className:"technology-label"},"Typescript")))))),n.a.createElement("div",{className:"section"},n.a.createElement(b.a,null,n.a.createElement(b.a.Row,null,n.a.createElement(b.a.Column,{width:7},n.a.createElement("div",{className:"label-text"},"Проектная занятость"),n.a.createElement("div",{className:"label-value"},"170%")),n.a.createElement(b.a.Column,{width:9},n.a.createElement("div",{className:"label-text"},"Проектов"),n.a.createElement("div",{className:"label-value"},"8")))))),open:!0,onSetOpen:a,styles:{sidebar:{background:"white"}}})},ae=[{value:"developer",label:"Разработчик"},{value:"middleDeveloper",label:"Старший разработчик"},{value:"seniorDevelope",label:"Ведущий разработчик"},{value:"teamLead",label:"Тимлид"},{value:"manager",label:"Менеджер"}],te=[{value:"it",label:"ИТ Отдел"},{value:"bookkeeping",label:"Бухгалтерия"},{value:"ml",label:"Отдел машинного обучения"}],le=()=>{const[e,a]=Object(l.useState)(!1),[t,r]=Object(l.useState)(!1),c=Object(d.g)(),m=Object(P.a)(),o=Object(s.b)(),{data:i,isLoading:E}=Object(s.c)(e=>e.employees),N=i;return Object(l.useEffect)(()=>{o(T())},[o]),!N||E?n.a.createElement(R,null):n.a.createElement(u.a,{className:"layout persons-page"},n.a.createElement(C,{title:"Добавление сотрудника",backlink:n.a.createElement("a",{className:"a-link",onClick:()=>{c.goBack()}},"< Вернуться к команде")}),n.a.createElement("div",null,n.a.createElement(p.a,{className:"filter-button",onClick:()=>{a(!e)}},n.a.createElement(v.a,{name:"filter"}),"Фильтры  ",n.a.createElement(v.a,{name:""+(e?"chevron down":"chevron up")}))),e&&n.a.createElement(h.a,null,n.a.createElement("div",{className:"filter-header"},"Фильтры"),n.a.createElement(b.a,null,n.a.createElement(b.a.Column,{width:4},n.a.createElement(A.a,{closeMenuOnSelect:!1,components:m,isMulti:!0,options:ae,placeholder:"Выберите должность"})),n.a.createElement(b.a.Column,{width:4},n.a.createElement(A.a,{closeMenuOnSelect:!1,components:m,isMulti:!0,options:te,placeholder:"Выберите подразделение"})),n.a.createElement(b.a.Column,{width:4},n.a.createElement(g.a,{icon:"search",placeholder:"Введите ФИО"})),n.a.createElement(b.a.Column,{width:4,textAlign:"right"},n.a.createElement(p.a,null,"Применить")))),n.a.createElement(y.a,{singleLine:!0},n.a.createElement(y.a.Header,null,n.a.createElement(y.a.Row,null,n.a.createElement(y.a.HeaderCell,{width:1}),n.a.createElement(y.a.HeaderCell,{width:3},"ФИО"),n.a.createElement(y.a.HeaderCell,{width:3},"Таб. номер"),n.a.createElement(y.a.HeaderCell,{width:3},"Руководитель"),n.a.createElement(y.a.HeaderCell,{width:2},"Подразделение"),n.a.createElement(y.a.HeaderCell,{width:2},"Специализация"),n.a.createElement(y.a.HeaderCell,{width:2}))),n.a.createElement(y.a.Body,null,N.map((e,a)=>n.a.createElement(y.a.Row,{key:e.id},n.a.createElement(y.a.Cell,{textAlign:"center"},a+1),n.a.createElement(y.a.Cell,null,e.fio),n.a.createElement(y.a.Cell,null,e.number),n.a.createElement(y.a.Cell,null,e.manager),n.a.createElement(y.a.Cell,null,e.department),n.a.createElement(y.a.Cell,null,e.spec),n.a.createElement(y.a.Cell,{textAlign:"right"},n.a.createElement("a",{className:"a-link",onClick:()=>{r(!0)}},"Настроить")))))),t&&n.a.createElement(ee,{person:N[0],setShowPersonModal:r}))},ne=()=>n.a.createElement(d.d,null,n.a.createElement(d.b,{path:"/",exact:!0,component:U}),n.a.createElement(d.b,{path:"/teams",exact:!0,component:U}),n.a.createElement(d.b,{path:"/persons",component:le}),n.a.createElement(d.b,{path:"/team/:id",component:Z}),n.a.createElement(d.a,{to:"/"}));var re=t(865);const ce=()=>n.a.createElement(re.a,{borderless:!0},n.a.createElement(u.a,null,n.a.createElement(re.a.Item,{key:"demouser",position:"right"},"DemoUser"))),se=()=>n.a.createElement(l.Fragment,null,n.a.createElement(E.a,null,n.a.createElement(ce,null),n.a.createElement(ne,null))),me=Object(m.d)(i,Object(m.a)(o.a));c.a.render(n.a.createElement(s.a,{store:me},n.a.createElement(se,null)),document.getElementById("root"))}});